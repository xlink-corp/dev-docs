# 智能工单模块 - 用户手册

> 本手册帮助用户理解和使用智能工单模块，涵盖工单创建、派发、执行、监控的完整流程。

---

## 一、模块概述

### 1.1 智能工单是什么

智能工单模块是设备运维管理的核心执行引擎，覆盖设备故障报修、预防性维护、服务请求等全类型工单的数字化管理。系统支持多来源触发、智能派工、移动执行、SLA管控，确保每一项维护任务都能被及时处理和追踪。

### 1.2 核心价值

| 价值维度 | 说明 |
|----------|------|
| **多来源触发** | 手动创建、巡检转工单、计划保养、IoT告警、预测性维护多种来源 |
| **智能派工** | 基于技能、负载、位置的自动指派策略 |
| **移动执行** | 支持手机端执行，拍照上传、离线作业 |
| **SLA管控** | 响应时限、完工时限、超时预警、自动升级 |
| **全程追溯** | 操作日志、时间线、附件存档，完整可追溯 |

### 1.3 用户角色

| 角色 | 主要职责 | 常用功能 |
|------|----------|----------|
| **执行人** | 完成分配的工单任务 | 我的工单、工单执行 |
| **调度员/主管** | 工单派发、监控、调度 | 调度台、工单模板 |
| **系统管理员** | 配置工单类型、SLA、权限 | 工单设置 |

---

## 二、快速入门

### 场景1：首次配置工单体系（系统管理员）

**目标**：完成工单模块的基础配置，使系统可以正常运行。

```
步骤流程：工单设置 → 配置工单类型 → 设置SLA策略 → 配置指派规则 → 创建工单模板
```

#### 第一步：配置工单类型

1. 进入「工单基础设置」→「工单类型」
2. 系统预置了常用类型：
   - **预防性维护**：定期保养任务
   - **故障维修**：设备故障报修
   - **报废**：设备故障报废
   - **紧急维护**：紧急抢修任务
   - **预测性维护**：预防性保修或维护
   - **服务请求**：服务类型工单
   - **保修**：设备维保期类维修

#### 第二步：设置SLA策略

1. 进入「工单基础设置」→「SLA策略」
2. 为不同优先级设置响应和完工时限：
   | 优先级 | 响应时限 | 完工时限 |
   |--------|----------|----------|
   | 紧急 | 15分钟 | 2小时 |
   | 高 | 1小时 | 8小时 |
   | 中 | 4小时 | 24小时 |
   | 低 | 8小时 | 72小时 |

#### 第三步：创建工单模板

1. 进入「工单模板」→「新建模板」
2. 填写模板基本信息（名称、编码、类型）
3. 添加作业步骤（检查项、测量项等）
4. 设置标准工时和安全提示
5. 保存模板

---

### 场景2：手动创建工单（调度员视角）

**目标**：收到维修请求后，快速创建并派发工单。

```
步骤流程：调度台 → 新建工单 → 选择对象 → 填写信息 → 指派人员 → 创建
```

#### 操作步骤

1. **打开调度台**
   
- 左侧菜单「调度台」或首页快捷入口
  
2. **点击「新建工单」**
   
- 右上角「新建工单」按钮
  
3. **选择作业对象**
   - **资产**：针对具体设备的工单
   - **空间**：针对区域/房间的工单
   - **通用任务**：不关联具体对象的任务

4. **填写工单信息**
   | 字段 | 说明 | 必填 |
   |------|------|------|
   | 标题 | 工单描述，简明扼要 | ✅ |
   | 工单类型 | 预防性维护/故障维修等 | ✅ |
   | 优先级 | 紧急/高/中/低 | ✅ |
   | 计划开始时间 | 预计开始执行的时间 | ❌ |
   | 到期时间 | 必须完成的截止时间 | ❌ |
   | 工单模板 | 选择预定义的作业步骤 | ❌ |
   | 验收人 | 工单完成验收的人员 | ❌ |
   | 执行人 | 实际执行任务的人员 | ❌ |

5. **创建工单**
   
   - 点击「创建」按钮完成

---

### 场景3：执行工单（执行人视角）

**目标**：完成分配给自己的维修任务。

```
步骤流程：我的工单 → 开始执行 → 完成作业步骤 → 上传附件 → 完成工单
```

#### 操作步骤

1. **查看待办工单**
   - 打开「我的工单」页面
   - 查看「待处理」标签页
2. **开始执行**
   - 点击工单卡片上的「开始执行」按钮
   - 系统记录开始时间，工单状态变为「进行中」
3. **完成作业步骤**（如有）
   - 左右滑动切换步骤（移动端）
   - 根据步骤类型完成操作：
     - ✅ 确认项：勾选完成
     - 📊 数值测量：输入测量值
     - 📝 文字记录：填写说明
     - 📷 拍照记录：拍照上传
   - 每个步骤可标记为：完成 / 失败 / 不适用
4. **上传作业附件**
   - 作业前照片：记录初始状态
   - 作业后照片：记录完成状态
   - 其他文档：相关资料
5. **完成工单**
   - 填写完工说明
   - 点击「完成工单」按钮
6. **验收工单**
   - 验收工单完成情况
   - 点击[驳回返工]按钮，填写驳回原因，点击[确认驳回]按钮
   - 工单驳回执行人再次处理，提交完成
   - 验收人点击[验收通过]按钮，填写验收备注后点击[确认通过]按钮



---

## 三、功能模块详解

### 3.1 调度台
<img width="1710" height="954" alt="QQ_1769758425737" src="https://github.com/user-attachments/assets/a10f7bb3-eccd-40be-94e3-811311fa4ca9" />


> 调度台是调度员/主管的核心工作界面，用于监控和管理所有工单。

#### 解决什么问题

- 实时掌握工单整体状态
- 快速筛选和定位问题工单
- 批量指派和处理工单

#### 核心功能

| 功能 | 操作说明 |
|------|----------|
| **KPI指标卡** | 点击指标卡快速筛选对应状态的工单 |
| **高级筛选** | 组合多个条件精确查找工单 |
| **快速查看** | 点击行打开抽屉，查看详情和快速操作 |
| **批量操作** | 勾选多个工单后批量设置到期时间、升级优先级、催办等 |
| **新建工单** | 快速创建新的工单 |

#### 状态筛选说明

| 状态 | 含义 |
|------|------|
| 待处理 | 已创建，等待开始执行 |
| 已排期 | 已安排执行时间 |
| 进行中 | 正在执行 |
| 暂停中 | 临时暂停（等待备件/审批等） |
| 已完成 | 执行完毕 |
| 已取消 | 被取消的工单 |

---

### 3.2 我的工单
<img width="1712" height="768" alt="QQ_1769758513262" src="https://github.com/user-attachments/assets/3725bad8-15a5-4206-abd4-8df28aec2aff" />


> 执行人的个人工作台，管理分配给自己的所有工单。

#### 页面布局

| Tab标签 | 内容说明 |
|---------|----------|
| **待处理** | 等待开始执行的工单（pending/scheduled） |
| **处理中** | 已开始但未完成的工单 |
| **待验收** | 已完成但需要验收的工单 |
| **已超期** | 超过到期时间的工单 |
| **已完成** | 最近完成的工单 |
| **我参与的** | 作为负责人或复核人参与的工单 |

#### 工单卡片信息

每个工单卡片显示：
- 优先级标签（颜色区分）
- 工单类型标签
- 工单标题
- 关联资产/位置
- 任务完成进度（如有作业步骤）

#### 快捷操作

| 按钮 | 适用状态 | 说明 |
|------|----------|------|
| 开始执行 | 待处理 | 开始执行工单 |
| 继续执行 | 进行中 | 继续未完成的执行 |
| 恢复执行 | 暂停中 | 从暂停状态恢复 |
| 查看详情 | 所有 | 进入工单详情页 |

---

### 3.3 工单执行
<img width="1708" height="960" alt="QQ_1769758668323" src="https://github.com/user-attachments/assets/cb6a8070-a572-4def-b825-9aabedbbfd67" />

> 工单执行是核心操作页面，支持两种执行模式。

#### 执行模式

| 模式 | 说明 | 适用场景 |
|------|------|----------|
| **标准模式** | 有预定义的作业步骤清单 | 预防性维护、标准检查 |
| **自由模式** | 无作业步骤，自由填写 | 故障维修、临时任务 |

#### 作业步骤类型

| 类型 | 图标 | 说明 | 示例 |
|------|------|------|------|
| 确认项 | ☑️ | 是/否判断 | "是否完成润滑" |
| 数值测量 | 📊 | 输入数值，支持上下限 | "温度：__℃（正常范围：20-30）" |
| 文字记录 | 📝 | 文本输入 | "异常情况描述" |
| 拍照记录 | 📷 | 拍照上传 | "设备状态照片" |
| 文件上传 | 📎 | 上传文档 | "检测报告" |

#### 步骤状态

| 状态 | 说明 |
|------|------|
| ⬜ 待完成 | 尚未处理 |
| ✅ 已完成 | 正常完成 |
| ❌ 失败 | 检查不通过或无法完成 |
| ➖ 不适用 | 本次不需要执行此步骤 |


#### 特殊操作

| 操作 | 说明 |
|------|------|
| **临时添加步骤** | 执行过程中发现需要额外检查项，可临时添加 |
| **暂停工单** | 因等待备件、审批等原因临时暂停，需选择暂停原因 |
| **上传附件** | 支持作业前/作业后照片分类上传 |

---

### 3.4 工单详情
<img width="1708" height="960" alt="QQ_1769758812335" src="https://github.com/user-attachments/assets/b2e71530-79d0-458a-910f-0eee4844f1d1" />

> 查看工单完整信息和历史记录。

#### 信息组成

| 区域 | 内容 |
|------|------|
| **基本信息** | 标题、类型、优先级、状态、创建人、指派人等 |
| **时间信息** | 创建时间、计划时间、实际开始、实际完成、耗时 |
| **关联信息** | 资产、位置、来源（巡检/告警等） |
| **作业清单** | 作业步骤完成情况（如有） |
| **附件** | 作业前/后照片、相关文档 |
| **操作日志** | 完整的状态变更和操作记录 |

#### 可用操作

| 操作 | 条件 | 说明 |
|------|------|------|
| 编辑 | 待处理/进行中 | 修改工单信息 |
| 取消 | 待处理/进行中 | 取消工单，需填写原因 |
| 打印 | 所有状态 | 打印工单单据 |
| 导出 | 所有状态 | 导出为Excel |

---

### 3.5 工单模板
<img width="1710" height="898" alt="QQ_1769758835155" src="https://github.com/user-attachments/assets/76352afe-e984-48a5-95e4-fe10f04c6789" />

> 预定义标准作业流程，确保执行规范化。

#### 解决什么问题

- 统一作业标准，确保执行质量
- 减少创建工单时的重复填写
- 积累和复用最佳实践

#### 模板配置项

| 配置项 | 说明 |
|--------|------|
| **基本信息** | 模板名称、编码、描述 |
| **作业对象类型** | 资产 / 空间 / 通用任务 |
| **工单类型** | 预防性维护、故障维修等 |
| **作业步骤** | 检查项清单，支持多种类型 |
| **标准工时** | 预计完成时间（分钟） |
| **所需工具** | 作业所需的工具清单 |
| **所需备件** | 作业可能用到的备件 |
| **安全提示** | 作业注意事项和安全要求 |

#### 作业步骤配置

每个步骤可配置：
- 步骤名称
- 步骤类型（确认/数值/文字/拍照/文件）
- 是否必填
- 数值上下限（数值类型）
- 排序顺序

---

### 3.6 工单设置
<img width="1710" height="888" alt="QQ_1769758868763" src="https://github.com/user-attachments/assets/e42d0716-c1cc-4667-867c-16cf394b02d6" />

> 系统管理员配置工单模块的各项参数。

#### 设置模块

| 模块 | 功能说明 |
|------|----------|
| **工单类型** | 管理工单分类（预防性、纠正性等） |
| **SLA策略** | 设置响应时限和完工时限规则 |
| **指派策略** | 配置自动派工规则 |
| **工单角色与权限** | 配置创建、编辑、取消等权限 |
| **团队与班组** | 管理执行团队 |
| **技能标签** | 定义人员技能标记 |
| **排班管理** | 配置值班安排 |

---

## 四、核心流程图解

### 4.1 工单生命周期

```
创建
  │
  ▼
┌─────────┐     排期      ┌─────────┐
│  待处理  │ ──────────→ │  已排期  │
│ pending │              │scheduled│
└────┬────┘              └────┬────┘
     │                        │
     │      开始执行          │
     └──────────┬─────────────┘
                │
                ▼
          ┌─────────┐
          │  进行中  │◄──────┐
          │in_progress│       │
          └────┬────┘       │
               │             │
     ┌─────────┼─────────┐   │
     │         │         │   │
     ▼         ▼         ▼   │
┌─────────┐         ┌─────────┐
│  暂停中  │─────────→│  恢复   │
│ on_hold │  恢复    └─────────┘
└─────────┘
	 │
     │  验收
     ▼
┌─────────┐         ┌─────────┐
│验收通过  │         │   驳回    │
│Accepted │         └─────────┘
└─────────┘
     │
     │  完成
     ▼
┌─────────┐         ┌─────────┐
│  已完成  │         │  已取消  │
│completed│         │cancelled│
└─────────┘         └─────────┘
```

### 4.2 多来源触发

| 来源 | 触发方式 | 说明 |
|------|----------|------|
| 手动创建 | 调度台新建 | 人工创建工单 |
| 巡检转工单 | 巡检问题「转工单」 | 巡检发现问题后转为维修工单 |
| 计划保养 | 预防性维护计划 | 按计划周期自动生成 |
| IoT告警 | 设备告警触发 | 异常告警自动创建工单 |

---

## 五、常见问题（FAQ）

### 基础操作

**Q：工单创建后可以修改吗？**

A：可以。待处理和进行中状态的工单可以编辑修改，已完成和已取消的工单不可修改。

**Q：如何暂停正在执行的工单？**

A：在工单执行界面点击「暂停工单」，选择暂停原因（等待备件/等待审批/安全原因/资源不可用/其他），填写说明后暂停。

**Q：工单没有作业步骤怎么执行？**

A：系统支持「自由执行模式」，直接填写处理说明和上传附件即可完成工单。

**Q：执行人可以临时添加作业步骤吗？**

A：可以。在执行界面点击「添加步骤」可以临时添加额外的检查项。

### 权限相关

**Q：谁可以取消工单？**

A：工单创建人、负责人、以及有「取消工单」权限的用户可以取消工单。

**Q：执行人可以重新指派工单吗？**

A：默认不可以，需要联系调度员或有权限的主管进行重新指派。

### 查询统计

**Q：如何查看工单的完整操作历史？**

A：进入工单详情页，切换到「操作日志」标签页查看完整的操作记录。

**Q：如何导出工单数据？**

A：在调度台筛选工单后，点击「导出」按钮可导出为Excel格式。

---

## 六、附录

### A. 术语表

| 术语 | 说明 |
|------|------|
| 工单 | 一项待执行的维护任务 |
| 工单类型 | 预防性维护、故障维修等分类 |
| 作业对象 | 工单针对的对象（资产/空间/通用） |
| SLA | 服务级别协议，定义时限要求 |
| 调度台 | 工单集中管理界面 |
| 作业步骤 | 工单执行时的检查清单项目 |
| PM | 预防性维护 |
| CM | 故障维修/纠正性维护 |

### B. 工单类型说明

| 类型 | 说明 |
|------|------|
| 预防性维护 | 定期计划保养 |
| 故障维修 | 设备故障报修 |
| 紧急维护 | 紧急抢修任务 |
| 保修       | 设备保修期内的维修 |
| 巡检工单 | 巡检衍生工单 |
| 服务请求 | 一般服务请求 |
| 其他 | 其他类型 |

### C. 优先级定义

| 优先级 | 颜色 | 典型响应时限 | 适用场景 |
|--------|------|--------------|----------|
| 紧急 | 🔴 红色 | 15分钟 | 影响生产/安全的紧急故障 |
| 高 | 🟠 橙色 | 1小时 | 重要设备故障 |
| 中 | 🔵 蓝色 | 4小时 | 一般维修任务 |
| 低 | ⚪ 灰色 | 8小时 | 可延期的任务 |

### D. 移动端支持页面

| 页面 | 说明 |
|------|------|
| 移动首页 | 快捷入口卡片 |
| 我的工单 | 个人工单列表 |
| 工单执行 | 执行作业步骤 |
| 工单详情 | 查看工单信息 |
| 新建工单 | 快速创建工单 |

---

## 版本更新记录

| 版本 | 日期 | 更新内容 |
|------|------|---------|
| v1.0 | 2026-01 | 初始版本 |
